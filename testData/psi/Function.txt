FILE
  FortranProgram(FUNCTION)
    FortranElementImpl(FUNCTION_STATEMENT)
      FortranElementImpl(TYPE_REFERENCE)
        PsiElement(real)('real')
      PsiWhiteSpace(' ')
      PsiElement(function)('function')
      PsiWhiteSpace(' ')
      PsiElement(IDENTIFIER)('average')
      PsiElement(LPAR)('(')
      FortranElementImpl(FUNCTION_PARAMS)
        PsiElement(IDENTIFIER)('x')
        PsiElement(COMMA)(',')
        PsiElement(IDENTIFIER)('y')
        PsiElement(COMMA)(',')
        PsiElement(IDENTIFIER)('z')
      PsiElement(RPAR)(')')
    PsiWhiteSpace('\n    ')
    FortranElementImpl(ASSIGNMENT_EXPRESSION)
      PsiElement(IDENTIFIER)('sum')
      PsiWhiteSpace(' ')
      PsiElement(EQ)('=')
      PsiWhiteSpace(' ')
      FortranBinaryExpression(BINARY_EXPRESSION)
        FortranBinaryExpression(BINARY_EXPRESSION)
          FortranReferenceExpression(REFERENCE_EXPRESSION)
            PsiElement(IDENTIFIER)('x')
          PsiWhiteSpace(' ')
          FortranOperationReference(OPERATION_REFERENCE)
            PsiElement(PLUS)('+')
          PsiWhiteSpace(' ')
          FortranReferenceExpression(REFERENCE_EXPRESSION)
            PsiElement(IDENTIFIER)('y')
        PsiWhiteSpace(' ')
        FortranOperationReference(OPERATION_REFERENCE)
          PsiElement(PLUS)('+')
        PsiWhiteSpace(' ')
        FortranReferenceExpression(REFERENCE_EXPRESSION)
          PsiElement(IDENTIFIER)('z')
    PsiWhiteSpace('\n    ')
    FortranElementImpl(ASSIGNMENT_EXPRESSION)
      PsiElement(IDENTIFIER)('average')
      PsiWhiteSpace(' ')
      PsiElement(EQ)('=')
      PsiWhiteSpace(' ')
      FortranBinaryExpression(BINARY_EXPRESSION)
        FortranReferenceExpression(REFERENCE_EXPRESSION)
          PsiElement(IDENTIFIER)('sum')
        PsiWhiteSpace(' ')
        FortranOperationReference(OPERATION_REFERENCE)
          PsiElement(DIV)('/')
        FortranElementImpl(FLOATING_POINT_CONSTANT)
          PsiElement(FLOATING_POINT_LITERAL)('3.0')
    PsiWhiteSpace('\n    ')
    PsiErrorElement:Expecting a statement
      PsiElement(return)('return')
    PsiWhiteSpace('\n')
    FortranElementImpl(END_FUNCTION_STATEMENT)
      PsiElement(end)('end')
  PsiWhiteSpace('\n\n')
  FortranProgram(FUNCTION)
    FortranElementImpl(FUNCTION_STATEMENT)
      FortranElementImpl(TYPE_REFERENCE)
        PsiElement(integer)('integer')
      PsiWhiteSpace(' ')
      PsiElement(function)('function')
      PsiWhiteSpace(' ')
      PsiElement(IDENTIFIER)('zero')
      PsiElement(LPAR)('(')
      FortranElementImpl(FUNCTION_PARAMS)
        <empty list>
      PsiElement(RPAR)(')')
    PsiWhiteSpace('\n    ')
    FortranElementImpl(ASSIGNMENT_EXPRESSION)
      PsiElement(IDENTIFIER)('zero')
      PsiWhiteSpace(' ')
      PsiElement(EQ)('=')
      PsiWhiteSpace(' ')
      FortranElementImpl(INTEGER_CONSTANT)
        PsiElement(INTEGER_LITERAL)('0')
    PsiWhiteSpace('\n')
    FortranElementImpl(END_FUNCTION_STATEMENT)
      PsiElement(end)('end')